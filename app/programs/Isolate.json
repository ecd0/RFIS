[
	{"description":["Performs sample isolation sequence, halting on success.",
		           "Procedure:",
		           " 1) lower both pins to home positions",
		           " 2) wait for completion of movements",
		           " 3) a) move arm to isolation imaging position",
		           "    b) move stage to isolation imaging position",
		           " 5) wait for completion of movements",
		           " 6) raise isolation pin using profiled speed",
		           " 7) enable foram detector",
		           " 7) wait for completion of movement",
		           " 8) if no foram detected, goto 11",
		           " 9) send Done message",
		           "10) wait for Clear message",
		           "xx) disable foram detector",
		           "11) lower isolation pin",
		           "12) wait for completion of movement",
		           "13) goto 6)",
		           "14) end"]},
	["zero_pins",
	 "M",["ISOLATION_Z","IMAGING_Z"],0],
	["wait_pins",
	 "w",5,"STOP","Timeout waiting for pins to reach home positions"],
	["zero_stage_arm",
	 "M",["STAGE_X","ARM_X","ARM_Y"],["STAGE_X_ISOLATION","ARM_X_ISOLATION","ARM_Y_ISOLATION"]],
	["wait_stage_arm",
	 "w",5,"STOP","Timeout waiting for stage and arm to reach positions"],
	["raise_iso_pin",
	 "M","ISOLATION_PIN","ISOLATION_Z_DETECT"],
	["wait_pin_up",
	 "w",5,"STOP","Timeout waiting for isolation pin to reach detection position"],
	{"name":"wait_for_foram",
	 "command":"wait",
	 "conditions":{"symbol_values":{"FORAM_PRESENT":1}},
	 "timeout":5,
	 "timeout_message":"Timeout waiting for positive foram detection",
	 "timeout_action":["g","lower_iso_pin"]}
	["done","D"]
	{"name":"wait_for_clear",
	 "command":"wait",
	 "conditions":{"command":"clear"},
	 ]
	["lower_iso_pin",
	 "M","ISOLATION_Z",0]
	["wait_pin_down",
	 "w",5,"STOP","Timeout waiting for isolation pin to reach home position"]
]
